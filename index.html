<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Behind The Stick</title>
</head>
<body>

	<!-- PHP SECTION -->
		<?php

			//Variables to store data
			$firstName = "";
			$lastName = "";
			$userName = "";
			$password = "";

			//Variables for Error Messages
			$firstNameErr = "";
			$lastNameErr = "";
			$userNameErr = "";
			$passwordErr = "";


			//Checking to see if the form was submitted 
			// if form is submitted, I am calling the test_input function to "clean the data", then returning the clean data back to the if statement
			//Else printing error message

			if ($_SERVER["REQUEST_METHOD"] == "POST")
			{



$name = test_input($_POST["name"]);
if (!preg_match("/^[a-zA-Z-' ]*$/",$name)) {
  $nameErr = "Only letters and white space allowed";
}

				if(empty($_POST["firstName"]))
				{
					$firstNameErr = "First Name is required.";
				}
				else
				{
					$firstName = test_input($_POST["firstName"]);


					if (!preg_match("/^[a-zA-Z-' ]*$/", $firstName))
					{
						$firstNameErr = "Only letters, dashes and white space allowed";
					}
					


				}

				if(empty($_POST["lastName"]))
				{
					$lastNameErr = "Last Name is required.";
				}
				else
				{
					$lastName = test_input($_POST["lastName"]);
				}

				if(empty($_POST["userName"]))
				{
					$userNameErr = "User Name is required.";
				}
				else
				{
					$userName = test_input($_POST["userName"]);
				}

				if(empty($_POST["password"]))
				{
					$passwordErr = "password is required.";
				}
				else
				{
					$password = test_input($_POST["password"]);
				}

			}



			//gets rids of whitespace, blackslahses and converts "<" to "&lt"
			function test_input($data) {
				$data = trim($data);
				$data = stripslashes($data);
				$data = htmlspecialchars($data);
				return $data;

			}	

		?>


	<!-- HTML SECTION -->

	<h1>Behind The Stick Development </h1>

	<!-- The index.html will submit the user input to this page and not move on to another -->
	<!-- $_SERVER["PHP_SELF"] display the name of file that is submitting data -->
	<!--  htmlspecialchars() prevents cross site scripting  -->

	<form method="post" action="<?php echo htmlspecialchars($_SERVER['PHP_SELF']);?>">
		<label for="firstName">First Name</label>
		<input type="input" id="firstName" name="firstName"> <span class="error">* <?php echo $firstNameErr; ?></span>

		<label for="lastName">Last Name</label>
		<input type="input" id="lastName" name="lastName"> <span class="error">* <?php echo $lastNameErr; ?></span>

		<label for="userName">User name</label>
		<input type="input" id="userName" name="userName"> <span class="error">* <?php echo $userNameErr; ?></span>

		<label for="password">Password</label>
		<input type="password" id="password" name="password"> <span class="error">* <?php echo $passwordErr; ?></span>

		<input type="submit" value="Sign Up">
	</form>


	




	<?php

		echo $firstName;
		echo "<br>";
		echo $lastName;
		echo "<br>";
		echo $userName;
		echo "<br>";
		echo $password;
	?>





</body>
</html>


